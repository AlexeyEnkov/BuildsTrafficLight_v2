var e=document;function f(a,b){this.a=a;g(a,b.cfg.ignoredIds);k(this,b.cfg);l(b);var c=this;e.getElementById("save").onclick=function(){c.save()}}f.prototype={save:function(){fetch("/settings",{method:"POST",body:JSON.stringify(m(this))}).then(function(a){console.log(a.status);return a.json()}).then(function(a){console.log(a)})}};
function l(a){e.getElementById("ip").textContent="Wifi: "+(a.ownIp?"connected. Local ip: "+a.ownIp:"not connected.");var b=e.getElementById("r"),c=e.getElementById("y"),d=e.getElementById("g");switch(a.status){case 1:d.className="act";break;case 3:b.className="act";c.className="act";break;case 2:b.className="act",e.getElementById("cid").textContent="Failed build: "+a.targetId}}
function m(a){var b={};b.ssid=n("ssid").value;b.pass=n("pass").value;b.ip=n("ip").value;b.port=n("port").value;b.sound=n("sound").checked;b.bright={};b.bright.r=n("red").value;b.bright.y=n("yellow").value;b.bright.g=n("green").value;b.ignoredIds=[];for(var c=0;c<a.a.length;c++){var d=a.a[c];n(d).checked&&b.ignoredIds.push(d)}return b}
function k(a,b){p(a,"ssid",b.ssid);p(a,"ip",b.ip);p(a,"port",b.port);b.bright&&(p(a,"red",b.bright.r),p(a,"yellow",b.bright.y),p(a,"green",b.bright.g));e.querySelector("input[name='sound']").checked=b.sound}function p(a,b,c){if(a=n(b))a.value=c}function n(a){return e.querySelector("input[name='"+a+"']")}
function g(a,b){for(var c=e.getElementById("idscont"),d=0;d<a.length;d++){var h=e.createElement("label");h.innerHTML="<div>"+a[d]+"</div><input name="+a[d]+" type='checkbox' "+(b&&-1!=b.indexOf(a[d])?"checked='y'":"")+"/>";h.title=a[d];c.appendChild(h)}}window.onload=function(){fetch("/settings").then(function(a){console.log(a.status);return a.json()}).then(function(a){console.log(a);new f(a.IDS,a.rawData)})};