<!DOCTYPE html>
<html>
<head>
<style type="text/css">
#cont{margin-top:100px;margin-left:auto;margin-right:auto}#left{vertical-align:top}#trl{background:#222;background-image:linear-gradient(transparent 3%,#111 30%);width:180px;height:460px;border-radius:10px;position:relative;border:solid 4px #333}#trl>div.act{opacity:1}#trl>div{background-size:5px 5px;width:120px;height:120px;border-radius:50%;left:30px;position:absolute;opacity:.4}#r{background:red;background-image:radial-gradient(brown,transparent);top:25px;box-shadow:0 0 20px #111 inset,0 0 10px red}#y{background:#ff0;background-image:radial-gradient(orange,transparent);top:170px;box-shadow:0 0 20px #111 inset,0 0 10px #ff0}#g{background:green;background-image:radial-gradient(lime,transparent);top:315px;box-shadow:0 0 20px #111 inset,0 0 10px lime}#info{text-align:left;padding:10px;border:1px solid #dcdcdc;border-radius:5px;background-color:#f1f1f1;margin-top:15px}#info div{margin-top:5px}#cid{font-size:18px;color:#ff0303}#right{font-size:20px;padding-left:60px}#right input{font-size:18px;outline:none;color:#3a3a3a;border:solid 1px #dcdcdc;border-radius:5px;padding:4px;margin-top:2px}#wifi input{width:110px}#wifi input[name="ssid"]{margin-right:10px}#host input[name="ip"]{width:130px;margin-right:10px}#host input[name="port"]{width:50px}#bright input{width:35px}#bright span{padding-right:10px}#wifi,#bright,#host,#sound{margin-bottom:15px}#sound input,#ids input{top:1px;margin-left:10px;position:relative}#idscont{margin-top:10px;height:160px;overflow:auto;color:#5a5a5a;border:1px solid #dcdcdc;border-radius:2px}#idscont label{display:block;margin-top:2px;font-size:14px;margin-left:5px}#idscont div{width:200px;overflow:hidden;text-overflow:ellipsis;display:inline-block;float:left}#save{font-size:20px;height:25px;width:70px;margin-left:auto;margin-right:auto;margin-top:20px;text-align:center;cursor:pointer;color:#0000b3;border:1px solid #dcdcdc;border-radius:2px}
</style>
</head>
<body>
<table id="cont" cellpadding="0" cellspacing="0"><tr> <td id="left"> <div id="trl"> <div id="r"></div><div id="y"></div><div id="g"></div></div></td><td id="right"> <div id="wifi"> <div>WiFi:</div><input type="text" name="ssid" placeholder="ssid"/> <input type="password" name="pass" placeholder="password"/> </div><div id="host"> <div>Build Server:</div><input type="text" name="ip" placeholder="ip"/> <input type="text" name="port" placeholder="port"/> </div><div id="bright"> <div>Brightness (%):</div><span>R</span><input type="text" name="red"/> <span>G</span><input type="text" name="yellow"/> <span>B</span><input type="text" name="green"/> </div><div id="sound"> <label>Sound:<input type="checkbox" name="sound"/></label> </div><div id="ids"> <div>Ignored build ids:</div><div id="idscont"> </div></div><div id="save">Save</div></td></tr><tr> <td colspan="2"> <div id="info"> <div id="ip"></div><div id="cid"></div></div></td></tr></table>
</body>
</html>
<script type="text/javascript">
var c=document;function f(b,a){this.a=b;g(b,a.cfg.ignoredIds);k(this,a.cfg);l(a);var d=this;c.getElementById("save").onclick=function(){d.save()}}f.prototype={save:function(){var b=c.createElement("form");c.querySelector("body").appendChild(b);b.method="POST";b.action="/settings";var a=c.createElement("input");a.hidden=!0;a.name="config";a.value=JSON.stringify(m(this));b.appendChild(a);b.submit()}};
function l(b){c.getElementById("ip").textContent="Wifi: "+(b.ownIp?"connected. Local ip: "+b.ownIp:"not connected.");var a=c.getElementById("r"),d=c.getElementById("y"),e=c.getElementById("g");switch(b.status){case "SUCC":e.className="act";break;case "RUN":a.className="act";d.className="act";break;case "FAIL":a.className="act",c.getElementById("cid").textContent="Failed build: "+b.targetId}}
function m(b){var a={};a.ssid=n("ssid").value;a.pass=n("pass").value;a.ip=n("ip").value;a.port=n("port").value;a.sound=n("sound").checked;a.bright={};a.bright.r=n("red").value;a.bright.y=n("yellow").value;a.bright.g=n("green").value;a.ignoredIds=[];for(var d=0;d<b.a.length;d++){var e=b.a[d];n(e).checked&&a.ignoredIds.push(e)}return a}
function k(b,a){p(b,"ssid",a.ssid);p(b,"ip",a.ip);p(b,"port",a.port);a.bright&&(p(b,"red",a.bright.r),p(b,"yellow",a.bright.y),p(b,"green",a.bright.g));c.querySelector("input[name='sound']").checked=a.sound}function p(b,a,d){if(b=n(a))b.value=d}function n(b){return c.querySelector("input[name='"+b+"']")}
function g(b,a){for(var d=c.getElementById("idscont"),e=0;e<b.length;e++){var h=c.createElement("label");h.innerHTML="<div>"+b[e]+"</div><input name="+b[e]+" type='checkbox' "+(a&&-1!=a.indexOf(b[e])?"checked='y'":"")+"/>";h.title=b[e];d.appendChild(h)}}window.onload=function(){new f(IDS,JSON.parse(rawData))};
</script>
